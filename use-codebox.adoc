---
sidebar: sidebar 
permalink: use-codebox.html 
keywords: codebox, automation, cloudformation, rest api, aws cli, permissions 
summary: Mit Codebox können Sie den Code generieren, der zum Ausführen aller von NetApp Workload Factory unterstützten Vorgänge erforderlich ist. 
---
= Verwenden Sie Codebox zur Automatisierung in NetApp Workload Factory
:allow-uri-read: 
:icons: font
:imagesdir: ./media/


[role="lead"]
Mit Codebox können Sie den Code generieren, der zum Ausführen aller von NetApp Workload Factory unterstützten Vorgänge erforderlich ist.  Sie können Code generieren, der mithilfe von Workload Factory REST-APIs, der AWS CLI und AWS CloudFormation verwendet und ausgeführt werden kann.

Codebox ist auf die Betriebsmodi von Workload Factory (_basic_, _read-only_ und _read/write_) abgestimmt, indem die entsprechenden Daten im Code basierend auf den AWS-Berechtigungen, die im Workload Factory-Konto für jeden Benutzer bereitgestellt werden, eingefügt werden.  Der Code kann wie eine Vorlage verwendet werden, in der Sie fehlende Informationen (z. B. Anmeldeinformationen) einfügen oder bestimmte Daten anpassen können, bevor Sie den Code ausführen.



== Wie Sie die Codebox verwenden

Wenn Sie Werte in die Assistenten der Workload Factory-Benutzeroberfläche eingeben, können Sie die Datenaktualisierung in Codebox sehen, während Sie jedes Feld ausfüllen.  Wenn Sie den Assistenten abgeschlossen haben, aber bevor Sie die Schaltfläche *Erstellen* unten auf der Seite auswählen, wählen Sieimage:button-copy-codebox.png["Die Schaltfläche „Kopieren“"] zum Kopieren in Codebox, um den zum Erstellen Ihrer Konfiguration erforderlichen Code zu erfassen.  Dieser Screenshot vom Erstellen eines neuen Microsoft SQL Servers zeigt beispielsweise die Assistenteneinträge für VPC und Verfügbarkeitszonen und die entsprechenden Einträge in Codebox für eine REST-API-Implementierung.

image:screenshot-codebox-example1.png["Ein Screenshot, der zeigt, wie ein Microsoft SQL Server in der UI erstellt wird, sowie die entsprechenden Einträge für VPC und Verfügbarkeitszonen in der Codebox."]

Bei einigen Codeformaten können Sie auch die Schaltfläche „Herunterladen“ auswählen, um den Code in einer Datei zu speichern, die Sie auf ein anderes System übertragen können.  Bei Bedarf können Sie den Code nach dem Download bearbeiten, um ihn an andere AWS-Konten anzupassen.



== Verwenden Sie den CloudFormation-Code aus der Codebox

Sie können den von Codebox generierten CloudFormation-Code kopieren und dann den Amazon Web Services CloudFormation-Stack in Ihrem AWS-Konto starten.  CloudFormation führt die Aktionen aus, die Sie in der Workload Factory-Benutzeroberfläche definiert haben.

Die Schritte zur Verwendung des CloudFormation-Codes können unterschiedlich sein, je nachdem, ob Sie ein FSx für ONTAP -Dateisystem bereitstellen, Kontoanmeldeinformationen erstellen oder andere Workload Factory-Aktionen ausführen.

Beachten Sie, dass der Code innerhalb einer von CloudFormation generierten YAML-Datei aus Sicherheitsgründen nach 7 Tagen abläuft.

.Bevor Sie beginnen
* Um sich bei Ihrem AWS-Konto anzumelden, müssen Sie über Anmeldedaten verfügen.
* Sie benötigen die folgenden Benutzerberechtigungen, um einen CloudFormation-Stack zu verwenden:
+
[%collapsible]
====
[source, json]
----
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "cloudformation:CreateStack",
                "cloudformation:UpdateStack",
                "cloudformation:DeleteStack",
                "cloudformation:DescribeStacks",
                "cloudformation:DescribeStackEvents",
                "cloudformation:DescribeChangeSet",
                "cloudformation:ExecuteChangeSet",
                "cloudformation:ListStacks",
                "cloudformation:ListStackResources",
                "cloudformation:GetTemplate",
                "cloudformation:ValidateTemplate",
                "lambda:InvokeFunction",
                "iam:PassRole",
                "iam:CreateRole",
                "iam:UpdateAssumeRolePolicy",
                "iam:AttachRolePolicy",
                "iam:CreateServiceLinkedRole"
            ],
            "Resource": "*"
        }
    ]
}
----
====


.Schritte
. Nachdem Sie die auszuführende Operation mithilfe der Workload Factory-Konsole definiert haben, kopieren Sie den Code in die Codebox.
. Wählen Sie *an CloudFormation umleiten* und die Seite Redirect to CloudFormation wird angezeigt.
. Öffnen Sie ein anderes Browserfenster, und melden Sie sich bei der AWS Management Console an.
. Wählen Sie auf der Seite „Umleiten zur CloudFormation“ die Option *Weiter*.
. Melden Sie sich bei dem AWS-Konto an, wo der Code ausgeführt werden soll.
. Wählen Sie auf der Seite „schneller Stapel erstellen“ unter „Funktionen“ *Ich bestätige, dass AWS CloudFormation möglicherweise ...* auswählen könnte.
. Wählen Sie *Stapel erstellen*.
. Überwachen Sie den Fortschritt von AWS oder von Workload Factory.




== Verwenden Sie den REST-API-Code aus der Codebox

Sie können die von Codebox generierten Workload Factory REST-APIs verwenden, um Ihre FSx für ONTAP -Dateisysteme und andere AWS-Ressourcen bereitzustellen und zu verwalten.

Sie können die APIs von jedem Host ausführen, der Curl unterstützt und über eine Internetverbindung verfügt.

Beachten Sie, dass die Authentifizierungs-Tokens in der Codebox verborgen sind, aber beim Kopieren und Einfügen des API-Aufrufs ausgefüllt werden.

.Schritte
. Nachdem Sie die Workload Factory-Konsole verwendet haben, um den Vorgang zu definieren, den Sie ausführen möchten, kopieren Sie den API-Code in die Codebox.
. Fügen Sie den Code ein und führen Sie ihn auf Ihrem Hostsystem aus.




== Verwenden Sie den AWS CLI-Code aus der Codebox

Mit der über Codebox generierten CLI für Amazon Web Services können Sie Ihre FSX for ONTAP-Dateisysteme und andere AWS-Ressourcen implementieren und managen.

.Schritte
. Nachdem Sie die Workload Factory-Konsole verwendet haben, um den Vorgang zu definieren, den Sie ausführen möchten, kopieren Sie die AWS CLI in die Codebox.
. Öffnen Sie ein anderes Browserfenster, und melden Sie sich bei der AWS Management Console an.
. Fügen Sie den Code ein und führen Sie ihn aus.




== Verwenden Sie Terraform aus der Codebox

Mit Terraform können Sie Ihre FSX for ONTAP-Filesysteme und andere AWS-Ressourcen implementieren und managen.

.Bevor Sie beginnen
* Sie benötigen ein System, auf dem Terraform installiert ist (Windows/Mac/Linux).
* Um sich bei Ihrem AWS-Konto anzumelden, müssen Sie über Anmeldedaten verfügen.


.Schritte
. Nachdem Sie die auszuführende Operation mithilfe der Workload Factory-Konsole definiert haben, laden Sie den Terraform-Code aus der Codebox herunter.
. Kopieren Sie das heruntergeladene Skriptarchiv auf das System, auf dem Terraform installiert ist.
. Extrahieren Sie die ZIP-Datei und befolgen Sie die Schritte in der Datei README.md.

